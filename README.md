# Два решения

## Решение в рамках проекта
``` ./ForProject ```
Так как не известно где используется данное решение ```OTPGenerator``` изменять его не стоит.

В представленном решении я отказался от наследования ибо использование "композиции" лучше, чем "наследование".
Так же переопределяется всего один метод и нет скрытой логики, то есть ```private``` методов.

В классе ```OTPGenerator``` я провел минорные изменения (типизация, обозначение области видимости).

Определил общий интерфейс, что позволит взаимозаменять классы

В классе ```SMSOTPGenerator``` отказался от повторного использования ```self::getCode()```, так как
исходя из алгоритма вызов ```self::getCode()``` происходил зачастую многократно (в среднем ~2 раза), что приводило к замедлению.

Алгоритм ```SMSOTPGenerator``` изменён с использованием метода shuffle.

*shuffle с php7.1 использует алгоритм Вихрь Мерсенна, его достаточно для обеспечения уникальности и защиты от выявления закономерности в рамках поставленной задачи*

Таким образом ```SMSOTPGenerator``` в моей реализации выдает ```117 ms``` при 100 000 вызовов,
при предыдущей реализации через многократный вызов ```self::getCode()``` выдает ```322 ms```

Запись теста ```self::getCode()``` при https://3v4l.org/DQPaq
Запись теста с shuffle при https://3v4l.org/Ljih7

Прирост скорости составляет **176%**:
* было 31008 codes per second
* стало 85578 codes per second


При увеличении кол-ва классов реализующих интерфейс ```OTPGeneratorInterface``` и не увеличении логики,
я бы перешел к решению ```Решение как одна функция```

Так же прошу отметить, что отсутствие повторяющихся символов усложняет ввод конечным пользователям и понижает безопасность:

- 4 любые цифры - 9000 
- 4 уникальные цифры - 4536 (50%)
- 6 любых цифр - 900000
- 6 уникальных цифр - 136080 (15%)

## Решение как одна функция
``` ./OneFunction ```

Решение предусматривает генерацию уникальных кодов длинной до 9 знаков.
Используется 10 цифр, запрещён ведущий ноль.
Генерация кодов без уникальности происходит классическим методом с использованием
```random_int```
Так же можно увеличить энтропию на малых уникальных кода, если изменять параметр offset через ```random_int``` - ($length + 1), но это скажется на скорости. 
